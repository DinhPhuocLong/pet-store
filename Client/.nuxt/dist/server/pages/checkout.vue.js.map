{"version":3,"file":"pages/checkout.vue.js","sources":["webpack:///./pages/checkout.vue?eb02","webpack:///./pages/checkout.vue","webpack:///./pages/checkout.vue?2365","webpack:///./pages/checkout.vue?bfd6"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-12\"},[_vm._ssrNode(\"<div class=\\\"w-[94%] xl:w-11/12 max-w-[1440px] mx-auto\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"my-6 text-center\\\"><h1 class=\\\"text-[25px] lg:text-[32px] font-bold\\\">\\n                Thông tin đơn hàng\\n            </h1></div> \"),_vm._ssrNode(\"<div class=\\\"flex flex-wrap\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"w-full lg:w-[70%] lg:pr-10\\\">\",\"</div>\",[_vm._ssrNode(\"<h2 class=\\\"text-[20px] font-bold\\\">Thông tin giao hàng</h2> \"),_vm._ssrNode(\"<div>\",\"</div>\",[_c('ValidationObserver',{ref:\"form\"},[_c('form',[_c('div',{staticClass:\"my-4\"},[_c('p',{staticClass:\"font-bold my-2\"},[_vm._v(\"\\n                                    Họ và tên\"),_c('b',{staticClass:\"text-red-500 ml-1\"})]),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"rules\":\"required\",\"custom-messages\":_vm.customErrorMessages.name},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shipmentDetails.name),expression:\"shipmentDetails.name\"}],staticClass:\"w-full border-b-2 border-gray-200 focus:outline-none py-2\",class:{\n                                            'border-red-600': errors[0]\n                                        },attrs:{\"placeholder\":\"Họ và tên...\",\"type\":\"text\"},domProps:{\"value\":(_vm.shipmentDetails.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shipmentDetails, \"name\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{staticClass:\"mt-1 text-sm italic text-red-500\"},[_vm._v(\"\\n                                        \"+_vm._s(errors[0])+\"\\n                                    \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"my-4\"},[_c('p',{staticClass:\"font-bold my-2\"},[_vm._v(\"\\n                                    Điện thoại\"),_c('b',{staticClass:\"text-red-500 ml-1\"},[_vm._v(\"*\")])]),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"rules\":\"required|vnPhone\",\"custom-messages\":_vm.customErrorMessages.phone},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                                        var errors = ref.errors;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shipmentDetails.phone),expression:\"shipmentDetails.phone\"}],staticClass:\"w-full border-b-2 border-gray-200 focus:outline-none py-2\",class:{\n                                            'border-red-600': errors[0]\n                                        },attrs:{\"placeholder\":\"Điện thoại...\",\"type\":\"text\"},domProps:{\"value\":(_vm.shipmentDetails.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shipmentDetails, \"phone\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{staticClass:\"mt-1 text-sm italic text-red-500\"},[_vm._v(\"\\n                                        \"+_vm._s(errors[0])+\"\\n                                    \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"my-4\"},[_c('p',{staticClass:\"font-bold my-2\"},[_vm._v(\"\\n                                    Email\"),_c('b',{staticClass:\"text-red-500 ml-1\"},[_vm._v(\"*\")])]),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"rules\":\"isValidateEmail\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                                        var errors = ref.errors;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shipmentDetails.email),expression:\"shipmentDetails.email\"}],staticClass:\"w-full border-b-2 border-gray-200 focus:outline-none py-2\",class:{\n                                            'border-red-600': errors[0]\n                                        },attrs:{\"placeholder\":\"Email...\",\"type\":\"text\"},domProps:{\"value\":(_vm.shipmentDetails.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shipmentDetails, \"email\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{staticClass:\"mt-1 text-sm italic text-red-500\"},[_vm._v(\"\\n                                        \"+_vm._s(errors[0])+\"\\n                                    \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"my-4\"},[_c('p',{staticClass:\"font-bold my-2\"},[_vm._v(\"\\n                                    Địa chỉ\"),_c('b',{staticClass:\"text-red-500 ml-1\"},[_vm._v(\"*\")])]),_vm._v(\" \"),_c('ValidationProvider',{attrs:{\"rules\":\"required\",\"custom-messages\":_vm.customErrorMessages.address},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                                        var errors = ref.errors;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shipmentDetails.address),expression:\"shipmentDetails.address\"}],staticClass:\"w-full border-b-2 border-gray-200 focus:outline-none py-2\",class:{\n                                            'border-red-600': errors[0]\n                                        },attrs:{\"placeholder\":\"Địa chỉ nhận hàng...\",\"type\":\"text\"},domProps:{\"value\":(_vm.shipmentDetails.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shipmentDetails, \"address\", $event.target.value)}}}),_vm._v(\" \"),_c('p',{staticClass:\"mt-1 text-sm italic text-red-500\"},[_vm._v(\"\\n                                        \"+_vm._s(errors[0])+\"\\n                                    \")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"my-4\"},[_c('p',{staticClass:\"font-bold my-2\"},[_vm._v(\"\\n                                    Ghi chú\\n                                    >\\n                                \")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shipmentDetails.userNote),expression:\"shipmentDetails.userNote\"}],staticClass:\"w-full border border-gray-200 focus:outline-none p-2 rounded-md\",attrs:{\"placeholder\":\"Nhập ghi chú (nếu có)...\",\"rows\":\"4\",\"cols\":\"50\"},domProps:{\"value\":(_vm.shipmentDetails.userNote)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.shipmentDetails, \"userNote\", $event.target.value)}}})])])])],1)],2),_vm._ssrNode(\" <div class=\\\"w-full lg:w-[30%] mt-8 lg:mt-0\\\"><div class=\\\"h-max\\\"><h2 class=\\\"text-[16px] p-4 bg-gray-200 font-bold\\\">\\n                        Sản phẩm\\n                    </h2> <div class=\\\"overflow-y-scroll\\\" style=\\\"height: 210px\\\">\"+(_vm._ssrList((_vm.cart),function(item){return (\"<div class=\\\"flex items-center justify-around p-4 border-t\\\"><div class=\\\"w-24\\\"><img\"+(_vm._ssrAttr(\"src\",item.product_images.length\n                                            ? item.product_images[0]\n                                                  .imageUrl\n                                            : ''))+(_vm._ssrAttr(\"alt\",item.name))+\" class=\\\"w-full\\\"></div> <div><p>\"+_vm._ssrEscape(_vm._s(item.name))+\"</p> <span>\"+_vm._ssrEscape(\"Số lượng: \"+_vm._s(item.quantity))+\"</span></div> <div><span>\"+_vm._ssrEscape(_vm._s(_vm._f(\"toVndCurrency\")(item.price)))+\"</span></div></div>\")}))+\"</div> <div class=\\\"flex items-center justify-between p-4 border-t\\\"><p class=\\\"font-bold\\\">Tạm tính:</p> <span>\"+_vm._ssrEscape(_vm._s(_vm._f(\"toVndCurrency\")(_vm.total)))+\"</span></div> \"+((_vm.discount)?(\"<div class=\\\"flex items-center justify-between p-4 border-t\\\"><p class=\\\"font-bold\\\">Giảm giá:</p> <span>\"+_vm._ssrEscape(_vm._s(_vm._f(\"toVndCurrency\")(_vm.discount)))+\"</span></div>\"):\"<!---->\")+\" <div class=\\\"flex items-center justify-between p-4 border-t\\\"><p class=\\\"text-[16px] text-red-500 font-bold\\\">\\n                            Tổng tiền:\\n                        </p> \"+((!_vm.newTotal)?(\"<span class=\\\"text-[16px] text-red-500 font-bold\\\">\"+_vm._ssrEscape(\"\\n                            \"+_vm._s(_vm._f(\"toVndCurrency\")(_vm.total))+\"\\n                        \")+\"</span>\"):(\"<span class=\\\"text-[16px] text-red-500 font-bold\\\">\"+_vm._ssrEscape(\"\\n                            \"+_vm._s(_vm._f(\"toVndCurrency\")(_vm.newTotal))+\"\\n                        \")+\"</span>\"))+\"</div> <div class=\\\"flex items-center justify-between p-4 border-t\\\"><input type=\\\"text\\\" placeholder=\\\"Mã giảm giá...\\\"\"+(_vm._ssrAttr(\"value\",(_vm.code)))+(_vm._ssrClass(\"flex-1 p-2 rounded-full focus:outline-none border border-gray-300\",{\n                                'border-red-600': _vm.codeError\n                            }))+\"> \"+((_vm.codeError)?(\"<p class=\\\"mt-1 text-sm italic text-red-500\\\">\"+_vm._ssrEscape(\"\\n                            \"+_vm._s(_vm.codeError)+\"\\n                        \")+\"</p>\"):\"<!---->\")+\" <button type=\\\"submit\\\" class=\\\"mx-4 lg:w-24 min-w-max p-2 rounded-full bg-black text-white hover:bg-red-500 transition-all duration-500\\\">\\n                            Cập nhật\\n                        </button></div> <div class=\\\"flex flex-col p-4 border-t\\\"><p class=\\\"font-bold\\\">Phương thức thanh toán:</p> <ul class=\\\"mt-2\\\"><li><input type=\\\"radio\\\" name=\\\"method\\\" checked=\\\"checked\\\"> <label>Thanh toán khi nhận hàng</label></li> <li><input type=\\\"radio\\\" name=\\\"method\\\"> <label>MoMo</label></li></ul></div> <div class=\\\"p-4\\\"><button class=\\\"w-full rounded-md p-4 bg-black text-white hover:bg-red-500 transition-all duration-500 uppercase\\\">\\n                            Xác nhận đơn hàng\\n                        </button></div></div></div>\")],2)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { ValidationProvider, ValidationObserver } from 'vee-validate';\r\nimport { mapState } from 'vuex';\r\nexport default {\r\n    middleware({ store, redirect }) {\r\n        if (!store.state.cart.cart.length) {\r\n            return redirect('/');\r\n        }\r\n    },\r\n    components: {\r\n        ValidationProvider,\r\n        ValidationObserver\r\n    },\r\n    data() {\r\n        return {\r\n            shipmentDetails: {\r\n                name: '',\r\n                phone: '',\r\n                email: '',\r\n                address: '',\r\n                userNote: ''\r\n            },\r\n            customErrorMessages: {\r\n                name: { required: 'Hãy nhập tên của bạn!' },\r\n                phone: { required: 'Hãy nhập số điện thoại của bạn!' },\r\n                address: { required: 'Hãy nhập địa chỉ của bạn!' }\r\n            },\r\n            code: '',\r\n            codeError: '',\r\n            coupon: '',\r\n            discount: ''\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            cart: state => state.cart.cart\r\n        }),\r\n        total() {\r\n            return this.cart.reduce(\r\n                (acc, curr) => +curr.price * +curr.quantity + +acc,\r\n                0\r\n            );\r\n        },\r\n        newTotal() {\r\n            if (this.coupon.type === 'fixed') {\r\n                this.discount = this.coupon.value;\r\n                return this.total - this.coupon.value;\r\n            }\r\n            if (this.coupon.type === 'percent') {\r\n                let discount = this.total * (this.coupon.value / 100);\r\n                this.discount = discount;\r\n                return this.total - discount;\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        async checkCoupon() {\r\n            try {\r\n                const response = await this.$axios.post(\r\n                    'http://157.245.55.243/api/coupon',\r\n                    { code: this.code }\r\n                );\r\n                this.coupon = response.data;\r\n            } catch (error) {\r\n                this.codeError = error.response.data.message;\r\n            }\r\n        },\r\n        onSubmit() {\r\n            this.$refs.form.validate().then(success => {\r\n                if (!success) {\r\n                    return;\r\n                } else {\r\n                    this.processPayment();\r\n                }\r\n            });\r\n        },\r\n        async processPayment() {\r\n            let payload = {\r\n                ...this.shipmentDetails,\r\n                cart: this.cart\r\n            };\r\n            try {\r\n                await this.$axios.post(\r\n                    'http://localhost:8000/api/order',\r\n                    payload\r\n                );\r\n                this.$store.dispatch('cart/clearCart');\r\n                this.$router.push({ name: 'thanks' });\r\n                this.$refs.form.reset();\r\n                this.shipmentDetails = {\r\n                    name: '',\r\n                    phone: '',\r\n                    email: '',\r\n                    address: '',\r\n                    userNote: ''\r\n                };\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    }\r\n};\r\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./checkout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./checkout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./checkout.vue?vue&type=template&id=b1f32382&\"\nimport script from \"./checkout.vue?vue&type=script&lang=js&\"\nexport * from \"./checkout.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"45f7f0fe\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AAKA;AACA;AACA;AACA;AAhBA;AAkBA;AACA;AAAA;AAEA;AADA;AACA;AAEA;AACA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;AAsBA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAFA;AACA;AAGA;AACA;AAIA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AA7CA;AApDA;;AC/QA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}