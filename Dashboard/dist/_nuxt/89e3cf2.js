(window.webpackJsonp=window.webpackJsonp||[]).push([[12,3,4,5],{421:function(t,e,n){var content=n(423);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(41).default)("328121f9",content,!0,{sourceMap:!1})},422:function(t,e,n){"use strict";n(421)},423:function(t,e,n){var r=n(40)((function(i){return i[1]}));r.push([t.i,".alert[data-v-407226a2]{\n  -webkit-animation-name:fadeInDown-data-v-407226a2;\n          animation-name:fadeInDown-data-v-407226a2;\n  -webkit-animation-duration:.3s;\n          animation-duration:.3s;\n  -webkit-animation-timing-function:ease-in-out;\n          animation-timing-function:ease-in-out;\n  -webkit-animation-fill-mode:forwards;\n          animation-fill-mode:forwards\n}\n@-webkit-keyframes fadeInDown-data-v-407226a2{\n0%{\n    opacity:0\n}\nto{\n    opacity:1\n}\n}\n@keyframes fadeInDown-data-v-407226a2{\n0%{\n    opacity:0;\n    transform:translate3d(-50%,-100%,0)\n}\nto{\n    opacity:1;\n    transform:translate3d(-50%,0,0)\n}\n}",""]),r.locals={},t.exports=r},424:function(t,e,n){"use strict";n.r(e);var r={props:["message","alertType","visible"],data:function(){return{successSvg:'<svg\n                width="1.8em"\n                height="1.8em"\n                viewBox="0 0 16 16"\n                class="bi bi-check"\n                fill="currentColor"\n                xmlns="http://www.w3.org/2000/svg"\n            >\n                <path\n                    fill-rule="evenodd"\n                    d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"\n                />\n            </svg>',errorSvg:'<svg width="1.8em" height="1.8em" viewBox="0 0 16 16" class="bi bi-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n                            <path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/>\n                            <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/>\n                        </svg>',alertIcon:""}},computed:{type:function(){var t;switch(this.alertType){case"danger":t="bg-red-500 border-red-700 text-red-500 ",this.alertIcon=this.errorSvg;break;case"success":t="bg-green-500 border-green-700 text-green-500 ",this.alertIcon=this.successSvg}return t}}},o=(n(422),n(18)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":"alert"}},[t.visible?n("div",{staticClass:"w-96 flex py-2 px-3 border-l-4 shadow-md mb-2 fixed top-8 left-2/4 transform -translate-x-2/4",class:t.type,staticStyle:{"z-index":"9999999"}},[n("div",{staticClass:"rounded-full bg-white mr-3",domProps:{innerHTML:t._s(t.alertIcon)}}),t._v(" "),n("div",{staticClass:"text-white max-w-xs "},[t._v("\n            "+t._s(t.message)+"\n        ")])]):t._e()])}),[],!1,null,"407226a2",null);e.default=component.exports},425:function(t,e,n){"use strict";n.r(e);var r={props:{visible:{type:Boolean,require:!0,default:!1},confirmButton:{type:String,require:!0,default:"Xoá"}},methods:{onConfirm:function(){this.$emit("confirm")},onCancel:function(){this.$emit("cancel")}}},o=n(18),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[t.visible?n("div",{staticClass:"fixed z-50 inset-0 overflow-y-auto",attrs:{"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"}},[n("div",{staticClass:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[n("div",{staticClass:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{staticClass:"hidden sm:inline-block sm:align-middle sm:h-screen",attrs:{"aria-hidden":"true"}},[t._v("​")]),t._v(" "),n("div",{staticClass:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},[n("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[n("div",{staticClass:"sm:flex sm:items-start"},[n("div",{staticClass:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[n("svg",{staticClass:"h-6 w-6 text-red-600",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}})])]),t._v(" "),n("div",{staticClass:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[n("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900",attrs:{id:"modal-title"}},[t._t("modal-title",(function(){return[t._v("default title")]}))],2),t._v(" "),n("div",{staticClass:"mt-2"},[n("p",{staticClass:"text-sm text-gray-500"},[t._t("modal-message",(function(){return[t._v("default message")]}))],2)])])])]),t._v(" "),n("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[n("button",{staticClass:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(e){return t.onConfirm()}}},[t._v("\n                        "+t._s(t.confirmButton)+"\n                    ")]),t._v(" "),n("button",{staticClass:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",attrs:{type:"button"},on:{click:function(e){return t.onCancel()}}},[t._v("\n                        Huỷ\n                    ")])])])])]):t._e()])}),[],!1,null,null,null);e.default=component.exports},426:function(t,e,n){"use strict";n(26),n(20),n(19),n(50),n(51);var r=n(13);n(25),n(30);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={recursiveCategory:function(t,e){var n=[];return function t(r,o){r.forEach((function(r){n.push(l(l({},r),{},{name:o+r.name})),t(r.children_categories||[],o+e)}))}(t,""),n}}},431:function(t,e,n){"use strict";n.r(e);var r=n(4),o=(n(33),n(30),n(63),n(426)),l=n(425),c=n(424),d=n(59),m={props:["category","title"],components:{ValidationProvider:d.b,ValidationObserver:d.a,Modal:l.default,Alert:c.default},data:function(){return{tableAction:-1,isShowModal:!1,deleteId:"",newCategory:{name:"",slug:"",parent_id:"",type:""},customErrorMessages:{name:{required:"Tên danh mục không được để trống!"},keywords:{required:"Từ khoá không được để trống!"}},columns:[{label:"Tên",field:"name",tdClass:"relative group"},{label:"Từ Khoá",field:"age",type:"number"},{label:"Đường Dẫn",field:"slug"},{label:"Người Tạo",field:"user"},{label:"Tình Trạng",field:"hidden"},{label:"Ngày Tạo",field:"created_at",formatFn:this.$options.filters.formatDate}],alert:{isVisible:!1,message:"",type:""}}},created:function(){this.title?this.newCategory.type=this.title:this.newCategory.type="product"},watch:{title:function(t,e){this.newCategory.type=t||"product"}},computed:{categoryTitle:function(){return this.title?"blog"==this.title?"Danh mục tin tức":"product"==this.title?"Danh mục sản phẩm":void 0:"Tất cả danh mục"},isDisabled:function(){return-1==this.tableAction},selectOptions:function(){var t=this.category;return o.a.recursiveCategory(t,"&nbsp;&nbsp;")},tableCategoryData:function(){var t=this.category;return o.a.recursiveCategory(t,"-")}},methods:{status:function(t){return t?"Ẩn":"Hiện"},categoryStore:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$services.Category.store(t.newCategory);case 3:t.newCategory.name="",t.newCategory.slug="",t.newCategory.parent_id="",t.newCategory.keywords="",t.$refs.form.reset(),t.alertTrigger("Thêm danh mục thành công","success",2e3),t.$emit("refresh-data"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t.alertTrigger(e.t0.response.data,"danger",2e3);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},alertTrigger:function(t,e,n){var r=this;this.alert.isVisible=!0,this.alert.message=t,this.alert.type=e,setTimeout((function(t){r.alert.isVisible=!1}),n)},onSubmit:function(){var t=this;this.$refs.form.validate().then((function(e){e&&t.categoryStore()}))},showConfirm:function(t){this.isShowModal=!0,this.deleteId=t},cancelDestroy:function(){this.isShowModal=!1},destroy:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$services.Category.delete(t);case 3:e.isShowModal=!1,e.alertTrigger("Xoá thành công danh mục!","success",2e3),e.$emit("refresh-data"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),e.alertTrigger(n.t0.response.data,"danger",2e3);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},f=n(18),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"font-nunito"},[n("h1",{staticClass:"text-3xl font-bold"},[t._v(t._s(t.categoryTitle))]),t._v(" "),n("div",{staticClass:"w-full xl:flex mt-10"},[n("div",{staticClass:"xl:w-1/4"},[n("h2",{staticClass:"text-lg font-semibold"},[t._v("Thêm danh mục")]),t._v(" "),n("ValidationObserver",{ref:"form"},[n("form",{staticClass:"mt-4",on:{submit:function(e){return e.preventDefault(),t.onSubmit()}}},[n("div",{staticClass:"mb-8"},[n("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2",attrs:{for:"name"}},[t._v("\n                            Tên\n                        ")]),t._v(" "),n("ValidationProvider",{attrs:{rules:"required","custom-messages":t.customErrorMessages.name},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCategory.name,expression:"newCategory.name"}],staticClass:"appearance-none border border-black  rounded w-full py-1.5 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",class:{"border-red-600":r[0]},domProps:{value:t.newCategory.name},on:{input:function(e){e.target.composing||t.$set(t.newCategory,"name",e.target.value)}}}),t._v(" "),n("p",{staticClass:"mt-1 text-sm italic text-red-500"},[t._v("\n                                "+t._s(r[0])+"\n                            ")])]}}])})],1),t._v(" "),n("div",{staticClass:"mb-8"},[n("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2",attrs:{for:"name"}},[t._v("\n                            Đường dẫn thân thiện(slug)\n                        ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCategory.slug,expression:"newCategory.slug"}],staticClass:"appearance-none border border-black  rounded w-full py-1.5 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",domProps:{value:t.newCategory.slug},on:{input:function(e){e.target.composing||t.$set(t.newCategory,"slug",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mb-8"},[n("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2",attrs:{for:"name"}},[t._v("\n                            Danh mục cha\n                        ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.newCategory.parent_id,expression:"newCategory.parent_id"}],staticClass:"py-1 px-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newCategory,"parent_id",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("Trống")]),t._v(" "),t._l(t.selectOptions,(function(option){return n("option",{key:option.id,domProps:{value:option.id,innerHTML:t._s(option.name)}})}))],2)]),t._v(" "),t.title?t._e():n("div",{staticClass:"mb-8"},[n("label",{staticClass:"block text-gray-700 text-sm font-bold mb-2",attrs:{for:"name"}},[t._v("\n                            Loại danh mục\n                        ")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.newCategory.type,expression:"newCategory.type"}],staticClass:"py-1 px-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newCategory,"type",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"product"}},[t._v("\n                                Danh mục sản phẩm\n                            ")]),t._v(" "),n("option",{attrs:{value:"blog"}},[t._v("\n                                Danh mục tin tức\n                            ")])])]),t._v(" "),n("button",{staticClass:"py-1 px-4 bg-blue-500 rounded-sm text-white hover:bg-blue-700",attrs:{type:"submit"}},[t._v("\n                        Thêm danh mục\n                    ")])])])],1),t._v(" "),n("div",{staticClass:"xl:w-3/4 ml-10"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.tableAction,expression:"tableAction"}],staticClass:"py-0.5 px-1.5 text-sm border border-solid border-gray-400 rounded-sm",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.tableAction=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"-1"}},[t._v("Hành động")]),t._v(" "),n("option",{attrs:{value:"delete"}},[t._v("Xoá")])]),t._v(" "),n("button",{staticClass:"py-0.5 px-1.5 text-sm border border-solid bg-none border-gray-400 rounded-sm",attrs:{disabled:t.isDisabled},on:{click:function(e){return t.console()}}},[t._v("\n                Áp dụng\n            ")]),t._v(" "),n("div",{staticClass:"inline-block w-full border border-solid border-gray-200 overflow-x-auto mt-4"},[n("vue-good-table",{attrs:{columns:t.columns,rows:t.tableCategoryData,styleClass:"vgt-table striped","pagination-options":{enabled:!0,rowsPerPageLabel:"Bản ghi trên trang",nextLabel:"Trang kế",prevLabel:"Trang trước",ofLabel:"trên"},"search-options":{enabled:!0,trigger:"key-up",skipDiacritics:!0,placeholder:"Tìm kiếm..."},"select-options":{selectionText:"bản ghi đã chọn",enabled:!0,clearSelectionText:"xoá",selectOnCheckboxOnly:!0}},scopedSlots:t._u([{key:"table-row",fn:function(e){return["hidden"==e.column.field?n("span",{staticClass:"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight"},[n("span",{staticClass:"absolute inset-0 opacity-50 rounded-full",class:[e.row.hidden?"bg-red-300":"bg-green-300"],attrs:{"aria-hidden":""}}),t._v(" "),n("span",{staticClass:"relative"},[t._v("\n                                "+t._s(t.status(e.row.hidden))+"\n                            ")])]):"name"==e.column.field?n("span",[n("span",[t._v("\n                                "+t._s(e.row.name)+"\n                            ")]),t._v(" "),n("div",{staticClass:"w-full text-black text-[12px] absolute px-5 left-0 bottom-0 opacity-0\n                            group-hover:opacity-100 group-hover:visible transition-all duration-500"},[n("nuxt-link",{staticClass:"hover:text-blue-400",attrs:{to:{name:"category-slug",params:{slug:e.row.slug}}}},[t._v("\n                                    Chỉnh sửa\n                                ")]),t._v(" "),n("span",[t._v(" | ")]),t._v(" "),n("button",{staticClass:"hover:text-blue-400",on:{click:function(n){return n.preventDefault(),t.showConfirm(e.row.id)}}},[t._v("\n                                    Xóa\n                                ")])],1)]):n("span",[t._v("\n                            "+t._s(e.formattedRow[e.column.field])+"\n                        ")])]}}])})],1)])]),t._v(" "),n("Modal",{attrs:{visible:t.isShowModal},on:{confirm:function(e){return t.destroy(t.deleteId)},cancel:function(e){return t.cancelDestroy()}}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[t._v("\n            Xoá danh mục\n        ")]),t._v(" "),n("div",{attrs:{slot:"modal-message"},slot:"modal-message"},[t._v("\n            Bạn có chắc là muốn xoá danh mục này chứ? Một khi danh mục này\n            được xoá thì toàn bộ sản phẩm của nó cũng sẽ bị xoá!\n        ")])]),t._v(" "),n("Alert",{attrs:{visible:t.alert.isVisible,message:t.alert.message,alertType:t.alert.type}})],1)}),[],!1,null,null,null);e.default=component.exports},441:function(t,e,n){"use strict";n.r(e);n(26),n(20),n(19),n(50),n(25),n(51);var r=n(13),o=n(54);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={middleware:["unAuthenticated"],layout:"dashboard",data:function(){return{title:this.$route.query.type||""}},created:function(){var t=this.$route.query.type||"";this.getCategory(t)},watch:{$route:function(t,e){var n=this.$route.query.type||"";this.title=n,this.getCategory(n)}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.b)({category:function(t){return t.category.category}})),methods:{getCategory:function(t){this.$store.dispatch("category/getCategory",t)},refreshTableData:function(){this.$store.dispatch("category/getCategory",this.title)}}},d=n(18),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("CategoryShow",{attrs:{category:t.category,title:t.title},on:{"refresh-data":function(e){return t.refreshTableData()}}})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CategoryShow:n(431).default})}}]);